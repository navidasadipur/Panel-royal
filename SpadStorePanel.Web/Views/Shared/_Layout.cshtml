<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/x-icon" href="~/Content/client/images/mainlogo.png" />
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600;700;800&amp;display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kaushan+Script&amp;display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="~/Content/client/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/client/css/animate.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/client/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/client/css/chosen.min.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/client/css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/client/css/pe-icon-7-stroke.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/client/css/jquery.scrollbar.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/client/css/lightbox.min.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/client/css/magnific-popup.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/client/css/slick.min.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/client/fonts/flaticon.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/client/css/megamenu.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/client/css/dreaming-attribute.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/client/css/mylightbox.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/client/css/style.css" />
    <title>رویال </title>
</head>
<body style="background-color: #add6dc;">


    @Html.Action("Navbar", "Home")
    @RenderBody()
    <!-- footer -->
    @Html.Action("Footer", "Home")


    <a href="#" class="backtotop active">
        <i class="fa fa-angle-up"></i>
    </a>

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @Scripts.Render("~/bundles/jqueryval")

    <script src="~/Content/client/js/jquery-1.12.4.min.js"></script>
    <script src="~/Content/client/js/bootstrap.min.js"></script>
    <script src="~/Content/client/js/chosen.min.js"></script>
    <script src="~/Content/client/js/countdown.min.js"></script>
    <script src="~/Content/client/js/jquery.scrollbar.min.js"></script>
    <script src="~/Content/client/js/lightbox.min.js"></script>
    <script src="~/Content/client/js/magnific-popup.min.js"></script>
    <script src="~/Content/client/js/slick.js"></script>
    <script src="~/Content/client/js/jquery.zoom.min.js"></script>
    <script src="~/Content/client/js/threesixty.min.js"></script>
    <script src="~/Content/client/js/jquery-ui.min.js"></script>
    <script src="~/Content/client/js/mobilemenu.js"></script>
    <script src="~/Content/client/js/mylightbox.js"></script>
    <script src="~/Content/client/js/wow.js"></script>
    <script src="~/Content/client/js/functions.js"></script>

    @RenderSection("scripts", required: false)

    <script>

        $(document).ready(function () {
            new WOW().init();

        });

        var compareList = [];

        function AddToCompareList(id) {
            if (!compareList.includes(id)) {
                var t = ".compare_" + id;
                $(t).css("color", "red");

                if (compareList.length < 5) {
                    compareList.push(id);


                    if (compareList.length != 0) {
                        $("#compare").show();
                        $("#compare").text("مقایسه" + "(" + compareList.length + ")");
                    }
                    else {
                        $("#compare").hide();
                        $("#compare").text("مقایسه");
                    }
                }
                else {
                    alert("لیست مقایسه بیشتر از 4 مورد است");
                }
            }
            else {
                compareList.pop(id);
                var t = ".compare_" + id;
                $(t).css("color", "white");
                if (compareList.length != 0) {
                    $("#compare").show();
                    $("#compare").text("مقایسه" + "(" + compareList.length + ")");
                }
                else {
                    $("#compare").hide();
                    $("#compare").text("مقایسه");
                }
            }
        }


        $("#compare").click(function () {
            var items = "";
            for (var i = 0; i < compareList.length; i++) {
                if (i == compareList.length - 1) {
                    items += compareList[i];
                }
                else {
                    items += compareList[i] + "-";
                }
            }
            window.location.href = "/Shop/Compare?CompareList=" + items;
        });



        if (window.location.pathname == "/" || window.location.pathname.toLowerCase() == "/home/index" || window.location.pathname.toLowerCase() == "/home") {
            $("body").addClass("theme-3");
        }

        GetWishList();

        function wish(id) {
            var t = ".product_" + id;

            if ($(t).css("color") == "rgb(255, 0, 0)") {
                removeFromWishList(id);
            }
            else {
                AddToWishList(id);
            }
        }

        function AddToWishList(id) {
            $("#loading").show();
            $.ajax({
                type: 'POST',
                url: '/Cookie/AddToWishList?productId=' + id,
                success: function (data) {
                    GetWishList();
                },
                error: function (data) {
                    console.log("error");
                    console.log(data);
                },
                complete: function () {
                    $("#loading").fadeOut(1000);
                }
            });
        }


        function removeFromWishList(id) {
            $("#loading").show();
            $.ajax({
                type: 'POST',
                url: '/Cookie/RemoveFromWishList?productId=' + id,
                success: function (data) {
                    var t = ".product_" + id;
                    $(t).css("color", "white");
                },
                error: function (data) {
                    console.log("error");
                    console.log(data);
                },
                complete: function () {
                    $("#loading").fadeOut(1000);
                }
            });
        }

        function GetWishList() {
            $.ajax({
                type: 'GET',
                url: '/Cookie/WishListTable',
                success: function (data) {
                    var obj = JSON.parse(data);
                    console.log(obj);
                    for (var i = 0; i < obj.WishListItems.length; i++) {
                        var t = ".product_" + obj.WishListItems[i].Id;
                        $(t).css("color", "red");
                    }
                },
                error: function (data) {
                    console.log("error");
                    console.log(data);
                },
                complete: function () {
                }
            });
        }

        function AddToCart(id, mainFeature) {
            $("#preloader").show();
            var mainFeatureId = null;
            if (mainFeature != null) {
                mainFeatureId = mainFeature;
            }
            if (mainFeatureId === null) {
                $.ajax({
                    type: 'POST',
                    url: '/Cookie/AddToCart?productId=' + id,
                    success: function (data) {
                        GetCart();
                    },
                    error: function (data) {
                        console.log("error");
                        console.log(data);
                    },
                    complete: function () {
                        $("#preloader").fadeOut(1000);
                    }
                });
            } else {
                $.ajax({
                    type: 'POST',
                    url: '/Cookie/AddToCart?productId=' + id + '&mainFeatureId=' + mainFeatureId,
                    success: function (data) {
                        GetCart();
                    },
                    error: function (data) {
                        console.log("error");
                        console.log(data);
                    },
                    complete: function () {
                        $("#preloader").fadeOut(1000);
                    }
                });
            }
        }

        //function AddToCartWithQuantity(productId) {
        //    //var mainFeatureId = $("#feature option:selected").val();
        //    var quantity = $("#quantity").val();

        //    //console.log(mainFeatureId);
        //    console.log(quantity);
        //}


        function GetCart() {
            $.ajax({
                type: 'GET',
                url: '/Cookie/CartSection',
                success: function (data) {
                    $("#cartSection").html(data);
                },
                error: function (data) {
                    console.log("error");
                    console.log(data);
                },
                complete: function () {
                }
            });
        }

        function RemoveFromCart(id, mainFeatureId, complete) {
            $("#preloader").show();
            $.ajax({
                type: 'POST',
                url: '/Cookie/RemoveFromCart?productId=' + id + '&mainFeatureId=' + mainFeatureId + '&complete=' + complete,
                success: function (data) {
                    GetCart();
                },
                error: function (data) {
                    console.log("error");
                    console.log(data);
                },
                complete: function () {
                    $("#preloader").fadeOut(1000);
                }
            });
        }


        function GetPopup(id) {
            $("#preloader").show();
            $.ajax({
                type: 'Get',
                url: '/Shop/PopupData/' + id,
                success: function (data) {
                    $(".pop").html(data);
                    $(".pop").removeClass("mfp-hide");
                },
                error: function (data) {
                    console.log("error");
                    console.log(data);
                },
                complete: function () {
                    $("#preloader").fadeOut(1000);
                }
            });
        }

        $('a.remove').click(function () {
            console.log('leeee');
        })

    </script>

</body>
</html>
